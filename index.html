<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<title>Launcher Salesforce (postMessage)</title>
<style>
   body {
     font-family: Arial, sans-serif;
   }
   iframe {
     width: 100%;
     height: 600px;
     border: 1px solid #999;
   }
</style>
</head>
<body>
<h2>Sito esterno</h2>
<button id="openLead">
   Apri Lead
</button>
<hr />
<!-- iframe SEMPRE lo stesso -->
<iframe
   id="sf-frame"
   src="https://ppcrmagenti.axa-italia.it/tabs/apex/javascriptIntegration"
></iframe>
<script>
   const iframe = document.getElementById("sf-frame");
   document.getElementById("openLead").onclick = () => {
     const message = {
       id: "mobilityLeadListView",
       component: "mobilityLeadListView",
       limit: 5,
       widget: true,
       DefaultFilter: "All",
       breadcrumbLabels: "Homepage"
     };
     iframe.contentWindow.postMessage(message, "*");
     console.log("[POSTMESSAGE â†’ Salesforce]", message);
   };
</script>
</body>
</html>
