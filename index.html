<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<title>Launcher Salesforce â€“ postMessage</title>
<style>
   body {
     font-family: Arial, sans-serif;
   }
   button {
     padding: 10px 16px;
     font-size: 16px;
     cursor: pointer;
   }
   #container {
     margin-top: 20px;
   }
   iframe {
     width: 100%;
     height: 600px;
     border: 1px solid #ccc;
   }
</style>
</head>
<body>
<h2>Sito / Portale</h2>
<button id="openLead">
   Apri Lead
</button>
<div id="container">
<iframe
     id="sf-frame"
     src="https://ppcrmagenti.axa-italia.it/tabs/apex/javascriptIntegration"
></iframe>
</div>
<script>
   const iframe = document.getElementById("sf-frame");
   function sendToSalesforce(payload) {
     iframe.contentWindow.postMessage(
       {
         source: "PORTAL",
         type: "OPEN_COMPONENT",
         payload
       },
       "*"
     );
   }
   document.getElementById("openLead").onclick = () => {
     sendToSalesforce({
       id: "mobilityLeadListView",
       component: "mobilityLeadListView",
       limit: 5,
       widget: true,
       DefaultFilter: "All",
       breadcrumbLabels: "Homepage"
     });
   };
   // opzionale: ascolto messaggi da Salesforce
   window.addEventListener("message", event => {
     if (event.data?.source === "SALESFORCE") {
       console.log("[FROM SALESFORCE]", event.data);
     }
   });
</script>
</body>
</html>
