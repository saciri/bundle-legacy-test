<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<title>Bundle legacy test</title>
<!-- bundle originale -->
<script src="assets/libs/bundle.js"></script>
</head>
<body>
<h2>Bundle.js (vecchio)</h2>
<button onclick="openLead()">Apri Lead</button>
<hr />
<!-- iframe SEMPRE lo stesso -->
<iframe
   id="sfFrame"
   style="width:100%; height:600px; border:1px solid #ccc"
></iframe>
<script>
   // MOCK Application (serve al bundle)
   window.Application = {
     authenticated: true,
     handlerComponent: function (params) {
       console.log('[MOCK] handlerComponent', params);
     }
   };
   function openLead() {
     const iframe = document.getElementById('sfFrame');
     // ⚠️ NOTA: questo URL su GitHub verrà BLOCCATO
     iframe.src =
       'https://ppcrmagenti.axa-italia.it/tabs/apex/javascriptIntegration';
     iframe.onload = () => {
       iframe.contentWindow.postMessage(
         {
           id: 'mobilityLeadListView',
           component: 'mobilityLeadListView',
           widget: true
         },
         '*'
       );
     };
   }
</script>
</body>
</html>
